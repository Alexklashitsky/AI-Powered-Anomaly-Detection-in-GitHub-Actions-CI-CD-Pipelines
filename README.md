# AI-Powered Anomaly Detection in GitHub Actions CI/CD Pipelines

<!-- Workflow Status Badges -->
[![Terraform Infrastructure](https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/terraform-deploy.yml/badge.svg)](https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/terraform-deploy.yml)
[![Flask CI/CD Pipeline](https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/ci-cd.yml/badge.svg)](https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/ci-cd.yml)
[![ML Model Training](https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/train-ml-model.ym- **Well Documented**: Extensive guides and examples
- **Tested**: Complete testing procedures included
- **Maintainable**: Clean code structure and best practices

---

## ğŸ“š Complete Documentation Suite

| Document | Purpose | Audience |
|----------|---------|----------|
| **[ğŸ“Š VISUAL_SUMMARY.md](./VISUAL_SUMMARY.md)** | Quick visual overview | Everyone (5 min) |
| **[ğŸ‰ PROJECT_COMPLETE.md](./PROJECT_COMPLETE.md)** | Achievement summary & next steps | Everyone (15 min) |
| **[ğŸ“‘ DOCUMENTATION_INDEX.md](./DOCUMENTATION_INDEX.md)** | Master navigation | All roles |
| **[ğŸ—ï¸ ARCHITECTURE_DIAGRAMS.md](./ARCHITECTURE_DIAGRAMS.md)** | Visual system flows | Architects |
| **[âš¡ QUICK_REFERENCE.md](./QUICK_REFERENCE.md)** | Daily commands | DevOps |
| **[ğŸ§ª TESTING_GUIDE.md](./TESTING_GUIDE.md)** | Testing procedures | QA, DevOps |
| **[ğŸ¤– AI_ANOMALY_DETECTION_OVERVIEW.md](./AI_ANOMALY_DETECTION_OVERVIEW.md)** | ML architecture | Technical leads |
| **[ğŸ“Š ML_ANOMALY_DETECTION_GUIDE.md](./ML_ANOMALY_DETECTION_GUIDE.md)** | Model details | Data scientists |
| **[âš¡ AZURE_FUNCTION_README.md](./AZURE_FUNCTION_README.md)** | Function guide | Backend devs |
| **[ğŸ“ˆ PROJECT_STATUS.md](./PROJECT_STATUS.md)** | Status & roadmap | Managers |

---

## ğŸ¤ Contributing

We welcome contributions! Here's how you can help:

### How to Contribute

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'feat: Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

### Areas for Contribution
- ğŸ› Bug fixes and improvements
- âœ¨ New features (Slack/PagerDuty integration, etc.)
- ğŸ“š Documentation enhancements
- ğŸ§ª Additional test coverage
- ğŸ¤– ML model improvements
- ğŸ¨ Dashboard development

### Report Issues
Found a bug? [Open an issue](https://github.com/YOUR_USERNAME/YOUR_REPO/issues) with:
- Clear description
- Steps to reproduce
- Expected vs actual behavior
- Environment details

---

## ğŸ“ License

This project is licensed under the MIT License - open for educational and commercial use.

---

## ğŸ“ Support & Community

- ğŸ“– **Documentation**: Complete guides in this repository
- ğŸ’¬ **Discussions**: [GitHub Discussions](https://github.com/YOUR_USERNAME/YOUR_REPO/discussions)
- ğŸ› **Issues**: [GitHub Issues](https://github.com/YOUR_USERNAME/YOUR_REPO/issues)
- âš¡ **Quick Help**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md)

---

<div align="center">

### ğŸš€ Ready to Deploy?

**[ğŸ“– Complete Guide](./PROJECT_COMPLETE.md)** | **[âš¡ Quick Reference](./QUICK_REFERENCE.md)** | **[ğŸ§ª Testing](./TESTING_GUIDE.md)**

---

**Built with â¤ï¸ using Azure, GitHub Actions, and Machine Learning**

â­ Star | ğŸ´ Fork | ğŸ“¢ Share

**[Report Bug](https://github.com/YOUR_USERNAME/YOUR_REPO/issues)** Â· **[Request Feature](https://github.com/YOUR_USERNAME/YOUR_REPO/issues)** Â· **[Contribute](#-contributing)**

---

**Version 1.0.0** | **Status: ğŸŸ¢ Production Ready** | **Last Updated: December 2025**

</div>ps://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/train-ml-model.yml)
[![Azure Function Deploy](https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/deploy-function.yml/badge.svg)](https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines/actions/workflows/deploy-function.yml)

![Azure](https://img.shields.io/badge/Azure-0078D4?style=flat&logo=microsoft-azure&logoColor=white)
![Terraform](https://img.shields.io/badge/Terraform-7B42BC?style=flat&logo=terraform&logoColor=white)
![GitHub Actions](https://img.shields.io/badge/GitHub_Actions-2088FF?style=flat&logo=github-actions&logoColor=white)
![Python](https://img.shields.io/badge/Python-3.11-3776AB?style=flat&logo=python&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=flat&logo=docker&logoColor=white)
![ML](https://img.shields.io/badge/ML-Isolation_Forest-FF6F00?style=flat&logo=tensorflow&logoColor=white)

---

## ğŸ“– Project Overview

A **production-ready DevOps solution** that deploys a Flask web application to Azure App Service with automated CI/CD pipelines and **AI-powered anomaly detection**. Every pipeline run is automatically analyzed by machine learning to detect performance issues, failures, and unusual patterns before they impact production.

### Why This Project?

**Problem**: Traditional CI/CD pipelines lack intelligence. Teams manually monitor builds, react to failures, and miss subtle performance degradations.

**Solution**: This project uses **machine learning (Isolation Forest)** to automatically detect anomalies in pipeline metrics, alerting teams via GitHub Issues, Microsoft Teams, and emailâ€”all without manual intervention.

### Key Benefits

- âœ… **Automated Monitoring**: AI analyzes every pipeline run (< 5 seconds)
- âœ… **Early Detection**: Catch issues before they reach production
- âœ… **Zero Secrets**: OIDC authentication (no client secrets stored)
- âœ… **Fully Automated**: Push code â†’ Auto deploy â†’ Auto monitor
- âœ… **Cost-Effective**: Serverless functions, pay per execution
- âœ… **Production-Ready**: Complete infrastructure as code with Terraform

> **ğŸ‰ NEW!** [**Project Complete Guide**](./PROJECT_COMPLETE.md) - Your complete system overview and next steps!

---

## ğŸ“š Documentation Hub

### ğŸš€ Quick Navigation
- **[ï¿½ Project Complete Guide](./PROJECT_COMPLETE.md)** - **START HERE!** Complete system summary
- **[ğŸ“Š Visual Summary](./VISUAL_SUMMARY.md)** - Quick visual overview (5 min read)
- **[ğŸ“‘ Documentation Index](./DOCUMENTATION_INDEX.md)** - Master navigation for all docs

### ğŸ› ï¸ Operations & Development
- **[âš¡ Quick Reference](./QUICK_REFERENCE.md)** - Daily commands (PowerShell)
- **[ğŸ§ª Testing Guide](./TESTING_GUIDE.md)** - Complete testing procedures
- **[ğŸ—ï¸ Architecture Diagrams](./ARCHITECTURE_DIAGRAMS.md)** - Visual system flows

### ğŸ¤– Technical Deep Dives
- **[ğŸ¤– AI Anomaly Detection Overview](./AI_ANOMALY_DETECTION_OVERVIEW.md)** - ML system architecture
- **[ğŸ“Š ML Model Guide](./ML_ANOMALY_DETECTION_GUIDE.md)** - Model training & evaluation
- **[âš¡ Azure Function Guide](./AZURE_FUNCTION_README.md)** - Serverless function details
- **[ğŸ“ˆ Project Status](./PROJECT_STATUS.md)** - Current status & roadmap

---

## ğŸ—ï¸ System Architecture

### High-Level Architecture (Mermaid Diagram)

```mermaid
graph TB
    subgraph "GitHub"
        A[Developer Push] --> B[GitHub Actions]
        B --> C[Build & Test]
        C --> D[Deploy to Azure]
        D --> E[AI Monitor Job]
    end
    
    subgraph "Azure Cloud"
        F[Container Registry<br/>ACR] --> G[App Service<br/>Flask App]
        E --> H[Azure Function<br/>Anomaly Detector]
        H --> I[ML Workspace<br/>Isolation Forest]
        I --> H
    end
    
    subgraph "Alerts"
        H --> J[GitHub Issues]
        H --> K[Microsoft Teams]
        H --> L[Email SendGrid]
    end
    
    C --> F
    D --> G
    
    style E fill:#ff6b6b
    style H fill:#4ecdc4
    style I fill:#95e1d3
```

### ASCII Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          GitHub                                  â”‚
â”‚  Developer â†’ Push Code â†’ GitHub Actions                         â”‚
â”‚                              â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Build   â”‚â”€â”€â”€â–¶â”‚  Deploy  â”‚â”€â”€â”€â–¶â”‚  AI Monitor (NEW!)     â”‚   â”‚
â”‚  â”‚  & Test  â”‚    â”‚          â”‚    â”‚  - Collect metrics     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â”‚  - Call Azure Function â”‚   â”‚
â”‚                       â”‚           â”‚  - Detect anomalies    â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                       â”‚
                        â”‚                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â–¼                       â–¼                   â”‚
        â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“  â”‚
        â”‚  â”ƒ            Azure Cloud Infrastructure            â”ƒ  â”‚
        â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›  â”‚
        â”‚                                                          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Container Registry â”‚      â”‚   App Service      â”‚  â”‚
        â”‚  â”‚  (ACR)              â”‚â”€â”€â”€â”€â”€â–¶â”‚   Flask Web App    â”‚  â”‚
        â”‚  â”‚  - Docker Images    â”‚      â”‚   - Health Check   â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                                                          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Azure Function (Anomaly Detector)               â”‚  â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
        â”‚  â”‚  â”‚ HTTP       â”‚  â”‚ Timer        â”‚               â”‚  â”‚
        â”‚  â”‚  â”‚ Trigger    â”‚  â”‚ Trigger      â”‚               â”‚  â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
        â”‚  â”‚        â”‚                 â”‚                        â”‚  â”‚
        â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
        â”‚  â”‚                 â–¼                                 â”‚  â”‚
        â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚  â”‚
        â”‚  â”‚     â”‚  Load ML Model       â”‚                     â”‚  â”‚
        â”‚  â”‚     â”‚  Predict Anomalies   â”‚                     â”‚  â”‚
        â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                   â”‚                                      â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  ML Workspace                                     â”‚  â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
        â”‚  â”‚  â”‚ Isolation Forestâ”‚  â”‚ Application Insights  â”‚ â”‚  â”‚
        â”‚  â”‚  â”‚ Model (Trained) â”‚  â”‚ + Key Vault + Storage â”‚ â”‚  â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ Anomaly Detected!
                                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                Alert Channels                             â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  GitHub    â”‚  â”‚ Microsoft  â”‚  â”‚  Email             â”‚ â”‚
        â”‚  â”‚  Issues    â”‚  â”‚   Teams    â”‚  â”‚  (SendGrid)        â”‚ â”‚
        â”‚  â”‚  ğŸ“‹        â”‚  â”‚    ğŸ’¬      â”‚  â”‚     ğŸ“§             â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» Tech Stack

| Category | Technologies |
|----------|-------------|
| **Cloud Provider** | Azure (App Service, Container Registry, ML Workspace, Functions, Key Vault, Storage) |
| **Infrastructure** | Terraform (Infrastructure as Code), Azure Resource Manager |
| **CI/CD** | GitHub Actions (4 workflows), OIDC Authentication |
| **Application** | Python 3.11, Flask, Gunicorn, Docker |
| **Machine Learning** | Azure ML, scikit-learn, Isolation Forest Algorithm |
| **Serverless** | Azure Functions (Python), HTTP + Timer Triggers |
| **Monitoring** | Application Insights, Azure Monitor, Custom ML Anomaly Detection |
| **Alerting** | GitHub API, Microsoft Teams Webhooks, SendGrid Email |
| **Testing** | Pytest, Coverage.py |
| **Security** | OIDC, Managed Identities, Azure Key Vault, HTTPS-only |

---

## ğŸš€ Quick Start (5 Steps)

### Prerequisites
- Azure account with active subscription
- Azure CLI installed ([Download](https://learn.microsoft.com/cli/azure/install-azure-cli))
- GitHub account with repository
- Git installed locally

### Step 1: Clone the Repository

```powershell
git clone https://github.com/YOUR_USERNAME/AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines.git
cd AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines
```

### Step 2: Setup Azure OIDC Authentication

```powershell
# Login to Azure
az login

# Set variables
$APP_NAME = "github-actions-flask-app"
$SUBSCRIPTION_ID = (az account show --query id -o tsv)
$TENANT_ID = (az account show --query tenantId -o tsv)

# Create App Registration
az ad app create --display-name $APP_NAME
$APP_ID = (az ad app list --display-name $APP_NAME --query "[0].appId" -o tsv)

# Create Service Principal
az ad sp create --id $APP_ID

# Assign Contributor role
az role assignment create `
  --assignee $APP_ID `
  --role "Contributor" `
  --scope "/subscriptions/$SUBSCRIPTION_ID"

Write-Host "âœ… App ID: $APP_ID"
Write-Host "âœ… Tenant ID: $TENANT_ID"
Write-Host "âœ… Subscription ID: $SUBSCRIPTION_ID"
```

### Step 3: Configure Federated Credentials in Azure Portal

1. Go to **Azure Portal** â†’ **Azure Active Directory** â†’ **App registrations**
2. Find your app (`github-actions-flask-app`)
3. Go to **Certificates & secrets** â†’ **Federated credentials** â†’ **Add credential**
4. Select **GitHub Actions deploying Azure resources**
5. Fill in:
   - **Organization**: Your GitHub username/org
   - **Repository**: `AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines`
   - **Entity type**: `Branch`
   - **Branch name**: `main`
   - **Name**: `github-actions-main`
6. Click **Add**

### Step 4: Create Terraform State Storage & Set GitHub Secrets

```powershell
# Create Terraform state storage
az group create --name terraform-state-rg --location westeurope

az storage account create `
  --name tfstatedevopsdelk `
  --resource-group terraform-state-rg `
  --location westeurope `
  --sku Standard_LRS

$ACCOUNT_KEY = (az storage account keys list `
  --resource-group terraform-state-rg `
  --account-name tfstatedevopsdelk `
  --query '[0].value' -o tsv)

az storage container create `
  --name tfstate `
  --account-name tfstatedevopsdelk `
  --account-key $ACCOUNT_KEY

Write-Host "âœ… Terraform state storage created"

# Set GitHub secrets (use GitHub CLI or manually in GitHub UI)
gh secret set AZURE_CLIENT_ID --body $APP_ID
gh secret set AZURE_TENANT_ID --body $TENANT_ID
gh secret set AZURE_SUBSCRIPTION_ID --body $SUBSCRIPTION_ID

Write-Host "âœ… GitHub secrets configured"
```

> **Note**: If you don't have GitHub CLI, set secrets manually:
> 1. Go to your GitHub repository
> 2. **Settings** â†’ **Secrets and variables** â†’ **Actions**
> 3. Add the three secrets above

### Step 5: Configure Terraform Variables & Deploy

```powershell
# Edit terraform/terraform.tfvars with unique names
# IMPORTANT: Change these values!
@"
acr_name         = "yourcompanyacr$(Get-Random -Maximum 9999)"  # Globally unique
app_service_name = "yourcompany-flask-$(Get-Random -Maximum 999)"  # Globally unique
resource_group_name    = "flask-app-rg"
location              = "westeurope"
app_service_plan_name = "flask-app-plan"
"@ | Out-File -FilePath terraform\terraform.tfvars -Encoding utf8

# Commit and push to trigger deployment
git add .
git commit -m "Initial setup: Configure infrastructure"
git push origin main

Write-Host "âœ… Deployment triggered! Check GitHub Actions for progress."
Write-Host "ğŸŒ Watch: https://github.com/YOUR_USERNAME/YOUR_REPO/actions"
```

---

## ğŸ“Š Usage & Monitoring

### Monitor Workflow Progress

```powershell
# Using GitHub CLI
gh run watch

# Or visit GitHub Actions in your browser
# https://github.com/YOUR_USERNAME/YOUR_REPO/actions
```

### Access Your Deployed Application

```powershell
# Get App Service URL from Azure
$APP_NAME = "yourcompany-flask-001"  # Your app name from terraform.tfvars
$APP_URL = "https://$(az webapp show --name $APP_NAME --resource-group flask-app-rg --query defaultHostName -o tsv)"

Write-Host "ğŸŒ Application URL: $APP_URL"
Write-Host "ğŸ¥ Health Check: $APP_URL/health"

# Test health endpoint
Invoke-WebRequest -Uri "$APP_URL/health"
```

### View Anomaly Detection Results

```powershell
# Check for anomaly issues
gh issue list --label anomaly

# View recent workflow runs
gh run list --limit 5

# Download anomaly reports
gh run download <run-id> --name anomaly-detection-report
```

### Check Azure Resources

```powershell
# List all resources
az resource list --resource-group flask-app-rg --output table

# Check App Service logs
az webapp log tail --name $APP_NAME --resource-group flask-app-rg

# Check Azure Function logs
az webapp log tail --name <function-app-name> --resource-group flask-app-rg
```

### Trigger Manual ML Model Training

```powershell
# Using GitHub CLI
gh workflow run train-ml-model.yml

# Or manually in GitHub UI:
# Actions â†’ Train ML Model â†’ Run workflow
```

---

## ğŸ”„ How It Works

### 1. **You Push Code**
```
Developer â†’ git push â†’ GitHub Actions triggered
```

### 2. **Automated Build & Deploy**
```
GitHub Actions:
  â”œâ”€ ğŸ§ª Run tests (pytest + coverage)
  â”œâ”€ ğŸ³ Build Docker image
  â”œâ”€ ğŸ“¦ Push to Azure Container Registry
  â””â”€ ğŸš€ Deploy to App Service
```

### 3. **AI Monitoring (Automatic)**
```
Monitor Job:
  â”œâ”€ ğŸ“Š Collect metrics (duration, failure_rate)
  â”œâ”€ â˜ï¸  Call Azure Function endpoint
  â”œâ”€ ğŸ¤– ML model predicts: Normal or Anomaly?
  â””â”€ ğŸš¨ Alert if anomaly detected
```

### 4. **Smart Alerting**
```
IF Anomaly:
  â”œâ”€ ğŸ“‹ Create GitHub Issue (with details)
  â”œâ”€ ğŸ’¬ Send Teams notification
  â”œâ”€ ğŸ“§ Send email alert (SendGrid)
  â””â”€ âš ï¸  (Optional) Fail build
ELSE:
  â””â”€ âœ… Log success, continue
```

---

## ğŸ¯ What Makes This Special?

### ğŸ¤– AI-Powered Intelligence
- **Machine Learning**: Isolation Forest algorithm trained on your pipeline history
- **Real-time Detection**: Analyzes every pipeline run in < 5 seconds
- **Predictive**: Catches issues before they become critical
- **Self-Learning**: Adapts to your pipeline patterns over time

### ğŸ” Secure by Default
- **No Secrets Stored**: OIDC authentication (federated credentials)
- **Managed Identities**: Azure resources authenticate automatically
- **Key Vault Integration**: Secure secret management
- **HTTPS Only**: All traffic encrypted

### ğŸ’° Cost-Effective
- **Serverless Functions**: Pay only for executions (< $0.01 per run)
- **Efficient Containers**: Optimized Docker images
- **Resource Optimization**: Right-sized Azure resources
- **Transparent Costs**: Built-in cost tracking

### ğŸ“Š Production-Ready
- **Infrastructure as Code**: Everything version-controlled
- **Automated Testing**: Pytest with coverage reports
- **Multi-Channel Alerts**: GitHub, Teams, Email
- **Comprehensive Docs**: 10 documentation files, 50,000+ words

---

## ğŸ› ï¸ Infrastructure Components

### Created by Terraform

| Resource | Purpose | Details |
|----------|---------|---------|
| **Resource Group** | Container for all resources | `flask-app-rg` |
| **Container Registry (ACR)** | Private Docker registry | Stores Flask app images |
| **App Service Plan** | Hosting plan | Linux, B1 tier |
| **App Service** | Web application host | Containerized Flask app |
| **ML Workspace** | Machine learning platform | Model training & inference |
| **Key Vault** | Secrets management | API keys, connection strings |
| **Application Insights** | Monitoring & logging | Performance metrics |
| **Storage Account** | Data storage | ML artifacts, logs |
| **Function App** | Serverless compute | Anomaly detection logic |
| **Terraform State Storage** | State management | Remote backend |

### GitHub Actions Workflows

| Workflow | Trigger | Purpose |
|----------|---------|---------|
| `terraform-deploy.yml` | Push to `terraform/**` | Deploy infrastructure |
| `ci-cd.yml` | Push to `main` | Build, deploy, monitor app |
| `train-ml-model.yml` | Weekly / Manual | Train ML model |
| `deploy-function.yml` | Push to function code | Deploy Azure Function |

---

## ğŸ§ª Testing & Validation

### Run Tests Locally

```powershell
# Install dependencies
pip install -r requirements.txt
pip install pytest pytest-cov

# Run tests with coverage
pytest --cov=. --cov-report=term --cov-report=html

# View coverage report
Start-Process .\htmlcov\index.html
```

### Test Docker Build

```powershell
# Build image
docker build -t flask-app:test .

# Run container
docker run -d -p 8000:8000 --name test-app flask-app:test

# Test endpoints
Invoke-WebRequest -Uri "http://localhost:8000/health"
Invoke-WebRequest -Uri "http://localhost:8000/"

# Clean up
docker stop test-app
docker rm test-app
```

### Validate Terraform

```powershell
cd terraform
terraform init
terraform validate
terraform plan
```

For complete testing procedures, see **[TESTING_GUIDE.md](./TESTING_GUIDE.md)**.

---
     - Creates GitHub issues for anomalies
     - Sends Teams/email alerts
     - Optional: Fails build on critical anomalies

3. **ML Model Training** (`.github/workflows/train-ml-model.yml`)
   - Trains Isolation Forest model for anomaly detection
   - Analyzes CI/CD pipeline metrics (duration, failure rate)
   - Registers model in Azure ML
   - Runs weekly or on-demand

4. **Azure Function Deployment** (`.github/workflows/deploy-function.yml`)
   - Deploys serverless anomaly detection function
   - Configures environment variables
   - Sets up managed identity permissions

## ğŸš€ Features

### Core Infrastructure
- **Infrastructure as Code**: Complete Azure infrastructure defined in Terraform
- **OIDC Authentication**: Secure, keyless authentication to Azure (no client secrets!)
- **Automated Testing**: Pytest with coverage reporting
- **Docker Containerization**: Consistent deployment across environments
- **Health Checks**: Built-in health monitoring endpoints
- **Managed Identity**: App Service uses managed identity to pull from ACR
- **Workflow Dependencies**: App deployment waits for infrastructure provisioning

### AI-Powered Monitoring ğŸ¤–
- **Real-time Anomaly Detection**: ML-powered analysis of every pipeline run
- **Isolation Forest Model**: Unsupervised learning on pipeline metrics
- **Automatic Alerting**: GitHub issues, Microsoft Teams, and email notifications
- **Predictive Analytics**: Detect performance degradation before failures
- **Historical Tracking**: Trend analysis and anomaly artifact storage
- **Customizable Thresholds**: Adjust sensitivity per environment
- **Auto-remediation Ready**: Optional build failure on anomalies

## ğŸ“‹ Prerequisites

1. **Azure Account** with an active subscription
2. **Azure CLI** installed locally (for initial setup)
3. **Terraform** >= 1.0 installed locally (optional, for local testing)
4. **GitHub Repository** with Actions enabled

## ğŸ”§ Setup Instructions

### Step 1: Create Azure App Registration for OIDC

```bash
# Login to Azure
az login

# Create App Registration
az ad app create --display-name "github-actions-flask-app"

# Get the Application (client) ID
APP_ID=$(az ad app list --display-name "github-actions-flask-app" --query "[0].appId" -o tsv)
echo "Application ID: $APP_ID"

# Create Service Principal
az ad sp create --id $APP_ID

# Get Tenant and Subscription IDs
TENANT_ID=$(az account show --query tenantId -o tsv)
SUBSCRIPTION_ID=$(az account show --query id -o tsv)

echo "Tenant ID: $TENANT_ID"
echo "Subscription ID: $SUBSCRIPTION_ID"
```

### Step 2: Configure Federated Credentials

In Azure Portal:
1. Go to **Azure Active Directory** â†’ **App registrations**
2. Find your app registration
3. Go to **Certificates & secrets** â†’ **Federated credentials**
4. Click **Add credential**
5. Select **GitHub Actions deploying Azure resources**
6. Fill in:
   - **Organization**: Your GitHub username/organization
   - **Repository**: `AI-Powered-Anomaly-Detection-in-GitHub-Actions-CI-CD-Pipelines`
   - **Entity type**: `Branch`
   - **Based on selection**: `main`
   - **Name**: `github-actions-main`
7. Click **Add**

### Step 3: Assign Azure Permissions

```bash
# Assign Contributor role to the service principal
az role assignment create \
  --assignee $APP_ID \
  --role "Contributor" \
  --scope "/subscriptions/$SUBSCRIPTION_ID"

# Optional: If you want to use Managed Identity for ACR pull (instead of admin credentials)
# Assign User Access Administrator role (required for role assignments in Terraform)
az role assignment create \
  --assignee $APP_ID \
  --role "User Access Administrator" \
  --scope "/subscriptions/$SUBSCRIPTION_ID"
```

**Note**: The Contributor role is sufficient for basic deployment. User Access Administrator is only needed if you want to enable the managed identity role assignment in `resources.tf`.

### Step 4: Create Terraform State Storage

```bash
# Create resource group for Terraform state
az group create --name terraform-state-rg --location westeurope

# Create storage account (name must be globally unique, lowercase, alphanumeric)
az storage account create \
  --name tfstatedevopsdelk \
  --resource-group terraform-state-rg \
  --location westeurope \
  --sku Standard_LRS \
  --encryption-services blob

# Get storage account key
ACCOUNT_KEY=$(az storage account keys list \
  --resource-group terraform-state-rg \
  --account-name tfstatedevopsdelk \
  --query '[0].value' -o tsv)

# Create blob container
az storage container create \
  --name tfstate \
  --account-name tfstatedevopsdelk \
  --account-key $ACCOUNT_KEY
```

### Step 5: Configure GitHub Secrets

In your GitHub repository, go to **Settings** â†’ **Secrets and variables** â†’ **Actions** and add:

- `AZURE_CLIENT_ID`: The Application (client) ID from Step 1
- `AZURE_TENANT_ID`: The Tenant ID from Step 1
- `AZURE_SUBSCRIPTION_ID`: The Subscription ID from Step 1

### Step 6: Update Terraform Variables

Edit `terraform/terraform.tfvars` to use globally unique names:

```hcl
# IMPORTANT: Change these to globally unique values
acr_name         = "yourcompanyacr123"      # Lowercase alphanumeric only, globally unique
app_service_name = "yourcompany-flask-001"  # Globally unique across all Azure

# Other settings
resource_group_name    = "flask-app-rg"
location              = "westeurope"
app_service_plan_name = "flask-app-plan"
```

**Note**: 
- Authentication (subscription_id, client_id, tenant_id) is handled via OIDC environment variables in GitHub Actions. No client secret is needed!
- ACR names must be 5-50 characters, lowercase letters and numbers only
- App Service names must be globally unique and can contain letters, numbers, and hyphens

## ğŸ“ Project Structure

```
.
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ terraform-deploy.yml    # Infrastructure deployment
â”‚       â”œâ”€â”€ ci-cd.yml               # Application CI/CD
â”‚       â””â”€â”€ train-ml-model.yml      # ML model training
â”œâ”€â”€ terraform/
â”‚   â”œâ”€â”€ main.tf                     # Provider and backend config
â”‚   â”œâ”€â”€ resources.tf                # Infrastructure resources
â”‚   â”œâ”€â”€ variables.tf                # Input variables
â”‚   â”œâ”€â”€ outputs.tf                  # Output values
â”‚   â””â”€â”€ terraform.tfvars.example    # Example variables
â”œâ”€â”€ app.py                          # Flask application
â”œâ”€â”€ requirements.txt                # Python dependencies
â”œâ”€â”€ test_app.py                     # Pytest tests
â”œâ”€â”€ Dockerfile                      # Container image definition
â””â”€â”€ README.md                       # This file
```

## ğŸ”„ Workflow Execution Order

1. **Push to `main` with Terraform changes:**
   ```
   Terraform Workflow â†’ Provisions Infrastructure â†’ Outputs ACR & App Service details
                                                    â†“
   CI/CD Workflow â†’ Build & Test â†’ Push to ACR â†’ Deploy to App Service
   ```

2. **Push to `main` with only app code changes:**
   ```
   CI/CD Workflow â†’ Build & Test â†’ Push to ACR â†’ Deploy to existing App Service
   ```

3. **Manual trigger or scheduled run for ML model training:**
   ```
   ML Training Workflow â†’ Trains model on Azure ML â†’ Registers model in Azure ML
   ```

## ğŸ§ª Local Development

### Run Flask App Locally

```bash
# Install dependencies
pip install -r requirements.txt

# Run the application
python app.py

# Access at http://localhost:8000
```

### Run Tests

```bash
# Install test dependencies
pip install pytest pytest-cov

# Run tests with coverage
pytest --cov=. --cov-report=term
```

### Build Docker Image Locally

```bash
docker build -t flask-app:latest .
docker run -p 8000:8000 flask-app:latest
```

### Test Terraform Locally

```bash
cd terraform

# Initialize Terraform
terraform init

# Validate configuration
terraform validate

# Plan changes
terraform plan

# Apply (with confirmation)
terraform apply
```

## ğŸ“Š Monitoring & Health Checks

The application includes a health check endpoint:

```bash
curl https://your-app-service.azurewebsites.net/health
```

Response:
```json
{
  "status": "healthy"
}
```

## ğŸ”’ Security Best Practices

âœ… **OIDC Authentication**: No long-lived secrets in GitHub
âœ… **Managed Identity**: App Service uses managed identity to pull from ACR
âœ… **HTTPS Only**: All App Service traffic is HTTPS
âœ… **Private ACR**: Container registry is private with RBAC
âœ… **Terraform State**: Remote state in encrypted Azure Storage
âœ… **Sensitive Outputs**: Sensitive Terraform outputs are marked as such

## ğŸ› ï¸ Troubleshooting

### OIDC Authentication Fails

- Verify federated credentials are configured correctly in Azure
- Check that the subject identifier matches: `repo:ORG/REPO:ref:refs/heads/main`
- Ensure the service principal has Contributor role

### ACR Login Fails

- Verify ACR was created successfully by Terraform
- Check that admin access is enabled on ACR
- Ensure the App Service managed identity has AcrPull role

### Role Assignment Permission Error

If you see: `does not have authorization to perform action 'Microsoft.Authorization/roleAssignments/write'`

**Solution 1** (Recommended for quick start):
- The role assignment is already commented out in `resources.tf`
- App Service uses admin credentials instead (already configured)
- This works fine for development and testing

**Solution 2** (For production with managed identity):
```bash
# Grant User Access Administrator role
az role assignment create \
  --assignee $APP_ID \
  --role "User Access Administrator" \
  --scope "/subscriptions/$SUBSCRIPTION_ID"

# Then uncomment the azurerm_role_assignment block in resources.tf
```

### Terraform State Issues

- Verify storage account `tfstatedevopsdelk` exists
- Check that the `tfstate` container exists
- Ensure service principal has access to the storage account

## ï¿½ Complete Documentation

This repository includes comprehensive documentation to help you understand, deploy, and maintain the AI-powered anomaly detection system:

### Core Documentation
- **[AI Anomaly Detection Overview](./AI_ANOMALY_DETECTION_OVERVIEW.md)** - Complete system architecture, features, benefits, and how everything works together
- **[Architecture Diagrams](./ARCHITECTURE_DIAGRAMS.md)** - Visual diagrams showing data flow, component interactions, and system architecture
- **[Quick Reference Guide](./QUICK_REFERENCE.md)** - Common commands and operations for day-to-day management
- **[Testing & Validation Guide](./TESTING_GUIDE.md)** - Comprehensive testing procedures for all components

### Component-Specific Guides
- **[ML Anomaly Detection Guide](./ML_ANOMALY_DETECTION_GUIDE.md)** - Detailed ML model documentation, training procedures, and model evaluation
- **[Azure Function Guide](./AZURE_FUNCTION_README.md)** - Serverless function details, configuration, and troubleshooting

### Getting Started
1. Start with this README for initial setup
2. Review [AI_ANOMALY_DETECTION_OVERVIEW.md](./AI_ANOMALY_DETECTION_OVERVIEW.md) to understand the full system
3. Use [QUICK_REFERENCE.md](./QUICK_REFERENCE.md) for common operations
4. Follow [TESTING_GUIDE.md](./TESTING_GUIDE.md) to validate your deployment

## ğŸ¯ What Makes This Special?

### ğŸ¤– AI-Powered Intelligence
- **Machine Learning**: Isolation Forest algorithm trained on your pipeline history
- **Real-time Detection**: Immediate analysis of every pipeline run
- **Predictive**: Catches issues before they become critical
- **Self-Learning**: Adapts to your pipeline patterns over time

### ğŸš€ Production-Ready
- **Infrastructure as Code**: Everything defined in Terraform
- **No Secrets**: OIDC authentication (no client secrets stored)
- **Scalable**: Serverless Azure Functions auto-scale
- **Monitored**: Application Insights integration
- **Secure**: Managed identities and Key Vault

### ğŸ“Š Comprehensive Monitoring
- **Multi-Channel Alerts**: GitHub Issues, Teams, Email
- **Detailed Reporting**: Anomaly scores and recommendations
- **Historical Tracking**: 30-day artifact retention
- **Customizable**: Adjust thresholds per environment

### ğŸ”§ Developer-Friendly
- **Easy Setup**: Step-by-step instructions
- **Well Documented**: Extensive guides and examples
- **Tested**: Complete testing procedures included
- **Maintainable**: Clean code structure and best practices

## ï¿½ğŸ“ License

This project is provided as-is for educational and demonstration purposes.

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

---

**Built with â¤ï¸ using Azure, GitHub Actions, and Machine Learning**

For questions or support, please open an issue on GitHub.
